## 问题202 题解

### 题目分析

本题是一个策略优化问题。我们需要在一个一维的兵营布局中，通过投放一定数量的“工兵”到一个指定兵营，来最小化“龙”和“虎”两个对立方势力的差距。

问题的核心在于理解“气势”和“势力”的计算方法，并找到一种方法来确定最佳的投放点 `p2`。

### 解题思路

题目的目标是找到一个最优的兵营编号 `p2`，使得双方势力差距的绝对值最小。考虑到兵营总数 $n$ 的范围（最大为 $10^5$），一个直接且高效的解决方案是**枚举所有可能的选择**。我们可以遍历从 1 到 $n$ 的每一个兵营，将其作为候选的 `p2`，计算将 $s_2$ 个工兵投放到此处的后果，并从中选出最优解。

#### 算法步骤

1.  **数据读取与初始化**:
    *   读取所有输入数据。
    *   一个关键点是数据范围：工兵数和势力值都可能非常大。为了防止计算过程中发生整数溢出，所有与工兵数和势力相关的变量都应使用64位长整型 (`long long`)。

2.  **计算投放前的基础势力**:
    *   首先，处理题目给定的第一个事件：$s_1$ 位工兵出现在 $p_1$ 号兵营。更新 $p_1$ 兵营的工兵数：`c[p1] += s1`。
    *   基于更新后的兵力，计算双方的基础势力：
        *   龙方基础势力（`dragon_base_power`） = $\sum_{i=1}^{m-1} c_i \times (m - i)$
        *   虎方基础势力（`tiger_base_power`） = $\sum_{i=m+1}^{n} c_i \times (i - m)$
    *   这一步可以通过一次遍历（从 1 到 $n$）完成。

3.  **枚举 `p2` 并寻找最优解**:
    *   初始化两个变量：`min_difference` 用于存储当前找到的最小差距（初值设为最大长整型），`best_p2` 用于存储最佳的兵营编号。
    *   我们开始一个主循环，让 `p2` 从 1 遍历到 $n$：
        *   在循环内部，我们计算如果将 $s_2$ 个工兵投放到当前 `p2` 会发生什么。我们不需要在每次循环中都重新计算总和，而是在基础势力的之上一增量计算。
        *   **如果 `p2 < m`**: 龙方势力会增加 `s2 * (m - p2)`。此时的差距是 `abs((dragon_base_power + s2 * (m - p2)) - tiger_base_power)`。
        *   **如果 `p2 > m`**: 虎方势力会增加 `s2 * (p2 - m)`。此时的差距是 `abs(dragon_base_power - (tiger_base_power + s2 * (p2 - m)))`。
        *   **如果 `p2 == m`**: 双方势力不变，差距是 `abs(dragon_base_power - tiger_base_power)`。
        *   将计算出的当前差距与 `min_difference` 进行比较。如果当前差距**严格小于** `min_difference`，则更新 `min_difference` 和 `best_p2`。
        *   （注意：题目要求若有多个最优解，取编号最小的。我们从1开始遍历，并只在“严格小于”时更新，可以确保最终得到的 `best_p2` 是最小的那个。）

4.  **输出结果**:
    *   循环结束后，`best_p2` 中保存的就是能使双方势力差距最小的、且编号最小的兵营编号。

该算法通过一次遍历计算基础势力，再一次遍历寻找最优解，总时间复杂度为 $O(N)$，对于给定的数据范围是完全可以接受的。
