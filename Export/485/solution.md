## 问题485 题解

### 题目分析

这个问题要求我们计算给定 $n$ 个整数中，所有两两组合的乘积之和。

### 解题思路

直接使用两层循环来计算所有两两组合的乘积是可行的，但时间复杂度为 $O(n^2)$。当 $n$ 较大时，可能会超时。我们可以通过数学公式来优化这个计算过程。

#### 方法一：数学公式

考虑以下完全平方公式：
$$(a_1 + a_2 + \cdots + a_n)^2 = (a_1^2 + a_2^2 + \cdots + a_n^2) + 2(a_1a_2 + a_1a_3 + \cdots + a_{n-1}a_n)$$

令：
-   `Sum` 为所有数的和: $Sum = \sum_{i=1}^{n} a_i$
-   `SumSq` 为所有数的平方和: $SumSq = \sum_{i=1}^{n} a_i^2$
-   `S` 为我们要求的目标和。

那么，公式可以写成：
$$Sum^2 = SumSq + 2S$$

通过移项，我们可以得到 `S` 的计算公式：
$$S = \frac{Sum^2 - SumSq}{2}$$

我们只需要一次遍历来计算 `Sum` 和 `SumSq`，然后代入公式即可。这个方法的时间复杂度是 $O(n)$。

#### 方法二：递推

我们也可以从另一个角度来思考。当我们计算到第 `i` 个数 $a_i$ 时，它需要与前面的所有数 $a_1, \ldots, a_{i-1}$ 相乘。
所以，我们可以维护一个 `prefix_sum`，表示前 `i-1` 个数的和。在遍历到 $a_i$ 时，将 $a_i \times prefix\_sum$ 加入总和。

这个方法的时间复杂度也是 $O(n)$。
