## 问题433 题解

### 题目分析

本题要求我们找出在给定长度 `n` 的情况下，用三种颜色的彩带（白色、蓝色、红色）进行排列的有效方案数。排列需满足两个条件：
1.  **无相邻同色**：相同颜色的彩带不能相邻。
2.  **蓝色位置限制**：蓝色必须位于白色和红色之间。这意味着任何蓝色彩带的两侧必须是白色和红色，例如 `W-B-R` 或 `R-B-W`。

### 解题思路

这个问题可以通过动态规划来解决。由于蓝色彩带的位置受到严格限制，我们可以发现蓝色彩带不能出现在序列的开头或结尾。如果蓝色彩带在末尾，它的一侧就没有彩带了，不满足条件2。

因此，一个有效的序列只能以白色（W）或红色（R）结尾。

#### 定义状态

-   设 `w[i]` 为长度为 `i` 的有效序列且以白色结尾的方案数。
-   设 `r[i]` 为长度为 `i` 的有效序列且以红色结尾的方案数。

#### 推导递推关系

**对于以白色结尾的序列 (w[i])**：
第 `i-1` 个位置的颜色不能是白色。
-   如果第 `i-1` 个位置是红色（R），那么前 `i-1` 个位置构成了一个以红色结尾的有效序列。方案数等于 `r[i-1]`。
-   如果第 `i-1` 个位置是蓝色（B），根据条件2，第 `i-2` 个位置必须是红色（R）。即序列的末尾是 `...R-B-W`。这要求前 `i-2` 个位置构成一个以红色结尾的有效序列。方案数等于 `r[i-2]`。

所以，`w[i] = r[i-1] + r[i-2]`。

**对于以红色结尾的序列 (r[i])**：
通过完全对称的逻辑：
-   如果第 `i-1` 个位置是白色（W），方案数是 `w[i-1]`。
-   如果第 `i-1` 个位置是蓝色（B），第 `i-2` 个位置必须是白色（W）。方案数是 `w[i-2]`。

所以，`r[i] = w[i-1] + w[i-2]`。

#### 斐波那契数列

观察基本情况：
-   `n=1`: "W", "R"。所以 `w[1] = 1`, `r[1] = 1`。
-   `n=2`: "WR", "RW"。所以 `w[2] = 1`, `r[2] = 1`。

由于 `w[1] = r[1]` 和 `w[2] = r[2]`，并且递推关系式是对称的，我们可以得出 `w[i] = r[i]` 对所有 `i >= 1` 都成立。

令 `F[i] = w[i] = r[i]`。递推关系可以简化为：
`F[i] = F[i-1] + F[i-2]`

这正是斐波那契数列的定义。我们通常定义斐波那契数列 `Fib(1)=1, Fib(2)=1, Fib(3)=2, ...`。
-   `F[1] = 1`
-   `F[2] = 1`

所以，`F[n]` 就是第 `n` 个斐波那契数。

#### 计算总方案数

长度为 `n` 的总方案数是所有以白色结尾和以红色结尾的方案数之和：
`Total(n) = w[n] + r[n] = F[n] + F[n] = 2 * F[n]`

### 实现细节
- 我们可以通过迭代的方式计算第 `n` 个斐波那契数，以避免递归带来的开销。
- 使用两个变量来保存前两个斐波那契数，然后循环 `n-2` 次来计算到第 `n` 个。
- 最终结果为 `2 * Fib(n)`。
- 对于 `n=3` 的样例：`Fib(3) = Fib(2) + Fib(1) = 1 + 1 = 2`。总方案数 = `2 * 2 = 4`，与样例相符。
