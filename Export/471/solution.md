## 问题471 题解

### 题目分析

这是一个经典的物品均分问题，与“均分纸牌”问题是同一类型。我们有 $n$ 个位置（岛屿），每个位置有一定数量的物品（物资）。物品只能在相邻的位置之间传递。我们的目标是用最少的操作次数，使得每个位置的物品数量都相等。

一次“移动”指的是一次物品从一个岛屿到相邻岛屿的运输动作，无论运输了多少物资，都只算作一次移动。

### 解题思路

这个问题的最优解可以通过**贪心算法**获得。我们可以从左到右，逐个处理每个岛屿，使其物资数量达到最终的平均值。

1.  **计算目标状态**:
    -   首先，计算所有岛屿的物资总和 `sum`。
    -   因为总数是 $n$ 的倍数，我们可以计算出每个岛屿最终应有的物资数量，即平均数 `avg = sum / n`。

2.  **差值分析与传递**:
    -   为了简化问题，我们不关注每个岛屿的绝对物资数，而是关注它与平均数的**差值**。
    -   我们可以创建一个数组，或者直接在原数组上进行操作，计算出每个岛屿的初始差值：`A[i] = A[i] - avg`。现在 `A[i]` 代表第 $i$ 个岛屿比平均数多（正数）或少（负数）的物资。我们的目标是通过移动，让所有 `A[i]` 都变为 0。

3.  **从左到右的贪心策略**:
    -   我们从第1个岛屿开始，依次让每个岛屿“达标”。
    -   **考虑第 $i$ 个岛屿**:
        -   如果它的物资数量不等于平均数（即 `A[i] != 0`），那么它必须与右边的第 $i+1$ 个岛屿进行物资交换，才能使自己达到平衡。
        -   **关键洞察**: 只要 `A[i]` 不为0，无论它是多是少，都**必须**发生一次物资从 $i$ 到 $i+1$ 或从 $i+1$ 到 $i$ 的移动。这次交换就算作一次移动。
        -   因此，只要当前岛屿不平衡，总的移动次数就必须加一。
    -   **传递不平衡量**:
        -   当第 $i$ 个岛屿通过与第 $i+1$ 个岛屿交换而达到平衡后，我们可以认为它把自己的“不平衡”完全转移给了第 $i+1$ 个岛屿。
        -   在计算上，这表现为：`A[i+1] = A[i+1] + A[i]`。
    -   我们从 `i=1` 一直处理到 `n-1`。当处理完第 $n-1$ 个岛屿后，由于总差值为0，第 $n$ 个岛屿会自动达到平衡，无需任何操作。

#### 算法步骤

1.  读取 $n$ 和 $n$ 个岛屿的物资数量。
2.  计算总和 `sum` 和平均数 `avg`。
3.  将每个岛屿的物资数 `A[i]` 更新为 `A[i] - avg`。
4.  初始化移动次数 `moves = 0`。
5.  从 `i = 0` 循环到 `n-2`（对于0-indexed数组）：
    -   如果 `A[i] != 0`，则 `moves++`。
    -   将不平衡量传递给下一个岛屿：`A[i+1] += A[i]`。
6.  循环结束后，`moves` 即为最少移动次数。

这个算法的时间复杂度是 $O(N)$，因为它只需要对岛屿数组进行几次线性遍历。
