## 问题207 题解

### 题目分析

这是一个经典的物品分配问题，目标是用最少的操作次数将物品（纸牌）平均分配到 $N$ 个位置（牌堆）。关键在于理解“移动次数”的定义以及牌只能在相邻堆之间移动的规则。

一次移动，无论移动了多少张牌，只要发生了“从一堆到另一堆”的动作，就算作一次。我们的目标是最小化这个动作的次数。

### 解题思路

这个问题的最优解可以通过**贪心算法**得到。我们可以从左到右依次处理每一堆牌，使它们逐个达到最终的平均状态。

1.  **计算目标状态**:
    *   首先，求出所有纸牌的总数 `sum`。
    *   由于总牌数是 $N$ 的倍数，我们可以计算出平均数 `avg = sum / N`。这是每堆牌最终应该达到的数量。

2.  **差值分析**:
    *   为了方便计算，我们可以不关心每堆牌的绝对数量，而是关心它与平均数的**差值**。
    *   创建一个新数组 `diff`，其中 `diff[i] = A[i] - avg`。`diff[i]` 表示第 $i$ 堆比平均数多（正数）或少（负数）的牌数。我们的目标就是通过移动，让所有的 `diff[i]` 都变为 0。

3.  **从左到右的贪心策略**:
    *   我们可以从第一堆开始，依次让每一堆都“达标”。
    *   考虑第 $i$ 堆。它的牌数 `A[i]` 可能不等于 `avg`。为了让它达标，它要么需要把多余的牌给右边的第 $i+1$ 堆，要么需要从第 $i+1$ 堆获得缺少的牌。
    *   **关键洞察**：无论第 $i$ 堆是多是少（只要 `A[i] != avg`），它都必须和第 $i+1$ 堆进行一次牌的交换来达到平衡。这次交换就算作一次移动。
    *   因此，只要第 $i$ 堆不平衡，移动次数就必须加一。
    *   当第 $i$ 堆通过与第 $i+1$ 堆交换而达到平衡后，我们可以把第 $i$ 堆的“不平衡量”(`A[i] - avg`) **累加**到第 $i+1$ 堆上。也就是说，第 $i+1$ 堆现在不仅要负责自身的平衡，还要负责接收（或提供）来自左边的牌。
    *   我们从 `i=1` 遍历到 `N-1`（最后一堆 `N` 会自动平衡，无需操作）。

#### 算法步骤

1.  计算总和 `sum` 和平均数 `avg`。
2.  创建一个数组，存储每堆牌与平均数的差值，或者直接在原数组上操作：`A[i] = A[i] - avg`。
3.  初始化移动次数 `moves = 0`。
4.  从 `i = 1` 循环到 `N-1`：
    *   如果 `A[i] != 0`，说明第 $i$ 堆在当前状态下不平衡，必须与右侧进行交换。因此，`moves++`。
    *   将第 $i$ 堆的不平衡量传递给第 $i+1$ 堆：`A[i+1] = A[i+1] + A[i]`。
5.  循环结束后，`moves` 即为最少移动次数。

这个算法的时间复杂度是 $O(N)$，因为我们只需要对牌堆数组进行几次线性遍历。
