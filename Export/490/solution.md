## 问题490 题解

### 题目分析

这个问题要求我们判断一个给定的正整数序列是否可以被划分为三个和相等的、连续的子段。

### 解题思路

这个问题可以通过前缀和来高效解决。

1.  **总和预判**：
    -   首先，计算整个序列的总和 `total_sum`。
    -   如果 `total_sum` 不能被3整除，那么显然无法将序列划分为三个和相等的子段。直接判断为 `NO`。

2.  **目标和**：
    -   如果 `total_sum` 可以被3整除，那么每个子段的目标和就是 `target_sum = total_sum / 3`。

3.  **寻找分割点**：
    -   我们的任务是找到两个分割点，将序列分成三部分。假设第一个分割点在索引 `i` 之后，第二个分割点在索引 `j` 之后。
    -   这意味着第一段 (`A[1]...A[i]`) 的和是 `target_sum`。
    -   第二段 (`A[i+1]...A[j]`) 的和也是 `target_sum`。
    -   第三段 (`A[j+1]...A[n]`) 的和自然也是 `target_sum`。

4.  **使用前缀和实现**：
    -   为了快速计算子段的和，我们先预处理一个前缀和数组 `prefix_sum`，其中 `prefix_sum[k]` 表示从 `A[1]` 到 `A[k]` 的和。
    -   现在，我们的条件转化为：
        -   找到一个索引 `i` (从1到n-2)，使得 `prefix_sum[i] == target_sum`。
        -   找到一个索引 `j` (从i+1到n-1)，使得 `prefix_sum[j] - prefix_sum[i] == target_sum`，这等价于 `prefix_sum[j] == 2 * target_sum`。
    -   我们可以遍历所有可能的第一个分割点 `i`，然后对于每个满足条件的 `i`，再向后寻找满足条件的第二个分割点 `j`。

**优化**：
为了进一步提高效率，在找到所有满足 `prefix_sum[i] == target_sum` 的 `i` 的数量后，我们可以从后向前遍历，统计满足 `prefix_sum[j] == 2 * target_sum` 的数量，并将结果累加。这种方法可以将复杂度从 $O(n^2)$ 降到 $O(n)$。
