## 问题519 题解

### 题目分析

这个问题要求我们在满足一系列时间窗口约束的条件下，找到完成所有运输任务所需的最小的“最大速度”。这是一个典型的“最大值最小化”问题（在这里是最小化最大速度），其解空间具有单调性，因此非常适合使用二分答案算法。

### 解题思路

1.  **单调性分析**：
    -   我们可以观察到，车的“最大速度” `v` 和“能否按时完成所有任务”之间存在一个单调关系。
    -   如果以 `v` 为最大速度可以完成任务，那么以任何大于 `v` 的速度也肯定可以完成（因为只会提前到达，有更多等待时间）。
    -   如果以 `v` 为最大速度无法完成任务，那么以任何小于 `v` 的速度也肯定无法完成。
    -   这种单调性是应用二分答案的基础。

2.  **二分答案**：
    -   我们对“最大速度”这个最终答案进行二分搜索。这是一个浮点数二分。
    -   搜索的下界是0，上界可以是一个足够大的数（例如，所有距离之和除以最小时间差，或者一个保守的 `10^8`）。
    -   对于二分出的一个候选速度 `v_candidate`，我们去检验它的可行性。

3.  **检验函数 `check(v)`**：
    -   `check(v)` 的任务是判断：如果车的最大速度不超过 `v`，我们是否能按时完成所有地点的签收。
    -   我们可以贪心地模拟整个行程来做这个判断：
        -   维护一个 `current_time` 变量，表示当前时刻，初始为0。
        -   按顺序处理 `n` 个地点。对于第 `i` 个地点：
            -   计算从上一个地点到这里的最短行驶时间：`travel_time = s_i / v`。
            -   更新到达当前地点的时间：`arrival_time = current_time + travel_time`。
            -   **检查是否迟到**：如果 `arrival_time > y_i`（`y_i` 是最晚签收时间），说明速度 `v` 太慢了，无法按时到达。`check(v)` 返回 `false`。
            -   **处理等待**：如果按时到达，我们需要更新离开当前地点的时间。由于必须在签收时间段内，最早也要等到 `x_i` 时刻。所以，离开时间是 `max(arrival_time, x_i)`。我们将 `current_time` 更新为这个离开时间。
    -   如果能成功处理完所有 `n` 个地点而没有迟到，说明速度 `v` 是可行的，`check(v)` 返回 `true`。

4.  **更新二分边界**：
    -   由于是浮点数二分，我们通常迭代一个固定的次数（例如100次）来达到足够的精度。
    -   如果 `check(v_candidate)` 返回 `true`，说明 `v_candidate` 是一个可行的（甚至可能偏大）的速度。我们想找的是**最小**的速度，所以我们记录下当前解 `ans = v_candidate`，并尝试在 `[..., v_candidate]` 的范围里继续搜索，即 `right = v_candidate`。
    -   如果 `check(v_candidate)` 返回 `false`，说明速度 `v_candidate` 太慢了。我们需要更快的速度，所以在 `[v_candidate, ...]` 的范围里搜索，即 `left = v_candidate`。

通过足够次数的迭代，我们就能逼近并找到满足条件的最小“最大速度”。

**算法复杂度**：
-   二分搜索：迭代固定次数。
-   每次 `check` 函数需要遍历 `n` 个地点，时间复杂度为 $O(n)$。
-   总的时间复杂度是 $O(n \times \text{迭代次数})$。
